数据通路容易考大题。

## CPU的功能和基本结构

### 功能

CPU由运算器和控制器组成。控制器负责协调并控制计算机各部件执行程序的指令序列，包括取指令、分析指令、执行指令；运算器是对数据进行加工。

CPU的具体功能：

* 指令控制：程序的顺序控制
* 操作控制：一条指令功能由若干操作信号的组合来实现。CPU管理并产生由内存取出的每条指令的操作信号，把操作信号送往相应部件
* 时间控制：为每条指令按时间顺序提供应用的控制信号
* 数据加工：对数据进行算术或逻辑运算
* 中断处理：对异常情况和特殊请求进行处理

### 基本结构

**运算器**

* 算术逻辑单元ALU
* 暂存寄存器
* 累加寄存器ACC
* 通用寄存器组
* 程序状态字寄存器PSW
* 移位器
* 计数器

**控制器**

* 程序计数器PC
* 指令寄存器IR
* 指令译码器
* 存储器地址寄存器MAR
* 存储器数据寄存器MDR
* 时序系统
* 微操作信号发生器

## 指令执行过程

### 指令周期

* 指令周期：CPU从主存中取出并执行一条指令的时间
* 机器周期：不同的工作周期，例如取指、间址、执行、中断周期
* 时钟周期（节拍）：CPU操作的最基本单位

### 指令周期的数据流

（各周期的详细步骤见书上的图）

根据指令要求依次访问的数据序列。

**取指周期**

根据PC中的内容从主存中取出指令代码并存放在IR中。取指的同时，PC加1

数据流如下：

* PC$\to$MAR$\to$地址总线$\to$主存
* CU发出读命令$\to$控制总线$\to$主存
* 主存$\to$数据总线$\to$MDR$\to$IR
* CU发出控制指令$\to$PC内容加1

**间址周期**

取操作数的有效地址。

数据流如下：

* Ad(IR)（或MDR）$\to$MAR$\to$地址总线$\to$主存
* CU发出读命令$\to$控制总线$\to$主存
* 主存$\to$数据总线$\to$MDR（存放操作数有效地址）

（Ad(IR)指的是存放在IR中的指令字的地址段）

**执行周期**

取操作数，并根据IR中指令字的操作码通过ALU操作产生执行结果。

不同



**中断周期**

处理中断请求。假设程序断点存入堆栈，并用SP指示栈顶指针，且进栈操作是先修改栈顶指针后存入数据，则数据流如下：



### 指令执行方案

**单指令周期**

对所有指令选用**相同的执行时间**来完成，即每条指令都在固定的时间周期内完成，指令之间串行执行。

对于本可以在更短时间内完成的指令，要使用这个较长的周期来完成，会**降低整个系统的运行速度**。

**多指令周期**

对不同类型的指令选用不同的执行步骤来完成。指令之间串行执行。但可以选用不同个数的时钟周期来完成不同指令的执行过程，指令需要几个周期就分配几个周期。

**流水线方案**

指令之间可以并行执行，目标是力求在**每个时钟脉冲**周期完成一条指令的执行过程。这种方案通过在每个使用周期启动一条指令，尽量让多条指令同时运行，但各自处于不同的执行步骤中。

## 数据通路

### 功能

数据在功能部件之间传输的路径称为数据通路。路径上的部件称为数据通路部件。数据通路描述了信息从什么地方开始，中间经过哪个寄存器或多路开关，最后传送到哪个寄存器。



### 基本结构

* CPU内部单总线方式



* CPU内部三总线方式



* 专用数据通路方式



**寄存器间的数据传送**

寄存器之间的数据传送可以通过CPU内部总线完成。



**主存与CPU之间的数据传送**

二者之间的数据传送同样也要借助CPU内部总线完成。



**执行算术或逻辑运算**

ALU内部本身没有存储功能，如果要执行加法运算，相加的两个数必须在ALU的两个输入端同时有效。



## 控制器

### 结构和功能

主要连接关系：

* 运算器通过数据总线与内存、输入设备、输出设备传送数据
* 输入输出设备与总线相连
* 内存、输入设备、输出设备通过地址总线接收地址信息，从控制总线得到控制信号，通过数据总线与其他部件传送数据。

控制器的主要功能：

* 从主存中取出一条指令，并指出下一条指令在内存中的位置
* 对指令进行译码或测试，并产生相应控制信号
* 指挥并控制CPU、主存、输入输出设备之间的数据流动

### 硬布线控制器





### 微程序控制器





## 指令流水线

### 基本概念

一种并行处理技术。



### 分类





### 影响因素





### 性能指标





### 超标量流水线





